Version 4
SHEET 1 1616 1716
WIRE 96 32 96 -16
WIRE 96 32 -64 32
WIRE 272 32 96 32
WIRE 416 32 272 32
WIRE -64 96 -64 32
WIRE 272 96 272 32
WIRE 416 128 416 32
WIRE -64 256 -64 176
WIRE -64 256 -240 256
WIRE 272 256 272 192
WIRE 416 256 416 192
WIRE 416 256 272 256
WIRE 528 256 416 256
WIRE 272 304 272 256
WIRE -64 320 -64 256
WIRE 784 320 784 272
WIRE 880 320 784 320
WIRE 992 320 960 320
WIRE 1024 320 1024 224
WIRE 1024 320 992 320
WIRE 1072 320 1024 320
WIRE 1184 320 1152 320
WIRE 1232 320 1232 224
WIRE 1232 320 1184 320
WIRE 1264 320 1232 320
WIRE 1376 320 1344 320
WIRE 1408 320 1408 224
WIRE 1408 320 1376 320
WIRE 1440 320 1408 320
WIRE 1552 320 1552 224
WIRE 1552 320 1520 320
WIRE -240 336 -240 256
WIRE 416 336 416 256
WIRE 992 368 992 320
WIRE 1184 368 1184 320
WIRE 1376 368 1376 320
WIRE 1552 368 1552 320
WIRE 992 480 992 432
WIRE 1184 480 1184 432
WIRE 1376 480 1376 432
WIRE 1552 480 1552 432
WIRE -64 496 -64 400
WIRE 96 496 -64 496
WIRE 272 496 272 400
WIRE 272 496 96 496
WIRE 416 496 416 400
WIRE 416 496 272 496
WIRE 96 544 96 496
WIRE -176 1184 -176 1136
WIRE -224 1200 -352 1200
WIRE -224 1280 -224 1248
WIRE -352 1296 -352 1200
WIRE -656 1312 -656 1280
WIRE -176 1312 -176 1264
WIRE -912 1328 -912 1280
WIRE -656 1408 -656 1392
WIRE -352 1408 -352 1376
WIRE -912 1440 -912 1408
WIRE -352 1584 -352 1536
WIRE -656 1600 -656 1568
WIRE -656 1696 -656 1680
WIRE -352 1696 -352 1664
FLAG -240 336 0
FLAG 528 256 A
FLAG 784 272 A
FLAG 224 176 pwm_a1
FLAG 224 384 pwm_a2
FLAG 96 -16 vP
FLAG 96 544 vN
FLAG 992 480 0
FLAG 1184 480 0
FLAG -912 1440 0
FLAG -912 1280 vsaw
FLAG -656 1408 0
FLAG -656 1280 vpwl1
FLAG -352 1408 0
FLAG -656 1696 0
FLAG -656 1568 vpwl2
FLAG -352 1696 0
FLAG -224 1280 0
FLAG -176 1312 A
FLAG -176 1136 pwm_a1
FLAG -352 1536 pwm_a2
FLAG 1376 480 0
FLAG 1552 480 0
FLAG 1024 224 vout1
FLAG 1232 224 vout2
FLAG 1408 224 vout3
FLAG 1552 224 vout4
SYMBOL nmos 224 96 R0
SYMATTR InstName M1
SYMATTR Value BSP89
SYMBOL nmos 224 304 R0
SYMATTR InstName M2
SYMATTR Value BSP89
SYMBOL voltage -64 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -64 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1m
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL diode 432 192 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL diode 432 400 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL e -176 1168 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res 976 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {Rf}
SYMBOL cap 976 368 R0
SYMATTR InstName C3
SYMATTR Value {Cf}
SYMBOL res 1168 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rf}
SYMBOL cap 1168 368 R0
SYMATTR InstName C4
SYMATTR Value {Cf}
SYMBOL voltage -912 1312 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 0 {0.999/fsw} 1n 1n {1/fsw} 1e12)
SYMATTR InstName V3
SYMBOL bv -352 1280 R0
SYMATTR InstName B1
SYMATTR Value V={if(V(vpwl1)>V(vsaw),15,0)}
SYMBOL voltage -656 1296 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 1 50 0 0 0 1e12)
SYMATTR InstName V6
SYMBOL bv -352 1568 R0
SYMATTR InstName B2
SYMATTR Value V={if(V(vpwl2)>V(vsaw),15,0)}
SYMBOL voltage -656 1584 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value SINE(0 1 50 0 0 180 1e12)
SYMATTR InstName V7
SYMBOL res 1360 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rf}
SYMBOL cap 1360 368 R0
SYMATTR InstName C1
SYMATTR Value {Cf}
SYMBOL res 1536 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rf}
SYMBOL cap 1536 368 R0
SYMATTR InstName C2
SYMATTR Value {Cf}
TEXT -752 -24 Left 2 !.param f0 = 100
TEXT -752 72 Left 2 !.param Tdead = T*pct_dead/100
TEXT -752 96 Left 2 !.param Ton = (0.5*T) - Tdead
TEXT -752 48 Left 2 !.param T = 1/f0
TEXT -752 120 Left 2 !.param Tdelay1 = 0
TEXT -752 144 Left 2 !.param Tdelay2 = 0.5*T
TEXT -256 -40 Left 2 !.tran 0 300m 200m
TEXT 760 -128 Left 2 !.param fc = 100
TEXT 760 -104 Left 2 !.param pi = 3.14159
TEXT 760 -80 Left 2 !.param Cf = 100n
TEXT 760 -56 Left 2 !.param Rf = 1/(2*pi*Cf*fc)
TEXT -752 0 Left 2 !.param pct_dead = 5
TEXT -928 1160 Left 2 !.param fsw = 50k
